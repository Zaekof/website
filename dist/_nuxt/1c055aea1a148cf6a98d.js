(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{142:function(e,s,t){(function(s){var t=/^\u0001ACTION ([^\u0001]+)\u0001$/,i=/^(justinfan)(\d+$)/,n=/\\([sn:r\\])/g,o={s:" ",n:"",":":";",r:""},r=e.exports={get:(e,s)=>void 0===e?s:e,isBoolean:e=>"boolean"==typeof e,isFinite:e=>isFinite(e)&&!isNaN(parseFloat(e)),isInteger:e=>!isNaN(r.toNumber(e,0)),isJustinfan:e=>i.test(e),isNull:e=>null===e,isRegex:e=>/[\|\\\^\$\*\+\?\:\#]/.test(e),isString:e=>"string"==typeof e,isURL:e=>RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i").test(e),justinfan:()=>`justinfan${Math.floor(8e4*Math.random()+1e3)}`,password:e=>["SCHMOOPIIE","",null].includes(e)?"SCHMOOPIIE":`oauth:${e.toLowerCase().replace("oauth:","")}`,promiseDelay:e=>new Promise(function(s){setTimeout(s,e)}),replaceAll:(e,s)=>{if(null==e)return null;for(var t in s)e=e.replace(new RegExp(t,"g"),s[t]);return e},unescapeHtml:e=>e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC:e=>e&&e.includes("\\")?e.replace(n,(e,s)=>s in o?o[s]:s):e,actionMessage:e=>e.match(t),addWord:(e,s)=>e.length?e+" "+s:e+s,channel:e=>{var s=(e||"").toLowerCase();return"#"===s[0]?s:"#"+s},extractNumber:e=>{for(var s=e.split(" "),t=0;t<s.length;t++)if(r.isInteger(s[t]))return~~s[t];return 0},formatDate:e=>{var s=e.getHours(),t=e.getMinutes();return`${s=(s<10?"0":"")+s}:${t=(t<10?"0":"")+t}`},inherits:(e,s)=>{e.super_=s;var t=function(){};t.prototype=s.prototype,e.prototype=new t,e.prototype.constructor=e},isNode:()=>{try{return e.exports="object"==typeof s&&"[object process]"===Object.prototype.toString.call(s)}catch(e){return!1}},isExtension:()=>{try{return!!(window.chrome&&chrome.runtime&&chrome.runtime.id)}catch(e){return!1}},merge:Object.assign,splitLine:(e,s)=>{var t=e.substring(0,s).lastIndexOf(" ");return-1===t&&(t=s-1),[e.substring(0,t),e.substring(t+1)]},toNumber:(e,s)=>{if(null===e)return 0;var t=Math.pow(10,r.isFinite(s)?s:0);return Math.round(e*t)/t},union:(e,s)=>{for(var t={},i=[],n=0;n<e.length;n++){t[o=e[n]]||(t[o]=!0,i.push(o))}for(n=0;n<s.length;n++){var o;t[o=s[n]]||(t[o]=!0,i.push(o))}return i},username:e=>{var s=(e||"").toLowerCase();return"#"===s[0]?s.slice(1):s}}}).call(this,t(84))},150:function(e,s,t){e.exports={client:t(184),Client:t(184)}},184:function(e,s,t){(function(s){var i=t(201),n=t(202),o=t(203).EventEmitter,r=t(204),a=t(205),h=t(206),c=t(207),l=s.WebSocket||s.MozWebSocket||t(152),m=t(142),u=function e(s){if(this instanceof e==!1)return new e(s);this.setMaxListeners(0),this.opts=m.get(s,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=m.get(this.opts.options.clientId,null),this.maxReconnectAttempts=m.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=m.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=m.get(this.opts.connection.reconnect,!1),this.reconnectDecay=m.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=m.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=m.get(this.opts.connection.secure,!1),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;var t="error";this.opts.options.debug&&(t="info"),this.log=this.opts.logger||r;try{r.setLevel(t)}catch(e){}this.opts.channels.forEach(function(e,s,t){t[s]=m.channel(e)}),o.call(this)};for(var p in m.inherits(u,o),u.prototype.api=i,n)u.prototype[p]=n[p];u.prototype.handleMessage=function(e){if(!m.isNull(e)){this.emit("raw_message",JSON.parse(JSON.stringify(e)),e);var s=m.channel(m.get(e.params[0],null)),t=m.get(e.params[1],null),i=m.get(e.tags["msg-id"],null);if(e.tags=a.badges(a.emotes(e.tags)),e.tags)for(var n in e.tags)"emote-sets"!==n&&"ban-duration"!==n&&"bits"!==n&&(m.isBoolean(e.tags[n])?e.tags[n]=null:"1"===e.tags[n]?e.tags[n]=!0:"0"===e.tags[n]&&(e.tags[n]=!1));if(m.isNull(e.prefix))switch(e.command){case"PING":this.emit("ping"),m.isNull(this.ws)||2===this.ws.readyState||3===this.ws.readyState||this.ws.send("PONG");break;case"PONG":var o=new Date;this.currentLatency=(o.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break;default:this.log.warn(`Could not parse message with no prefix:\n${JSON.stringify(e,null,4)}`)}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"375":case"376":case"CAP":break;case"001":this.username=e.params[0];break;case"372":this.log.info("Connected to server."),this.userstate["#tmijs"]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(()=>{m.isNull(this.ws)||2===this.ws.readyState||3===this.ws.readyState||this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout(()=>{m.isNull(this.ws)||(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},m.get(this.opts.connection.timeout,9999))},6e4);var r=new h.queue(2e3),c=m.union(this.opts.channels,this.channels);this.channels=[];for(var l=0;l<c.length;l++){var u=this;r.add(function(e){m.isNull(u.ws)||2===u.ws.readyState||3===u.ws.readyState||u.ws.send(`JOIN ${m.channel(c[e])}`)}.bind(this,l))}r.run();break;case"NOTICE":var p=[null],f=[s,i,t],d=[s,!0],g=[s,!1],_=[f,p],b=[f,[i]],v=`[${s}] ${t}`;switch(i){case"subs_on":this.log.info(`[${s}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[d,d,p]);break;case"subs_off":this.log.info(`[${s}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[g,g,p]);break;case"emote_only_on":this.log.info(`[${s}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[d,p]);break;case"emote_only_off":this.log.info(`[${s}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[g,p]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${s}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[d,d,p]);break;case"r9k_off":this.log.info(`[${s}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[g,g,p]);break;case"room_mods":var w=t.split(": ")[1].toLowerCase().split(", ").filter(e=>e);this.emits(["_promiseMods","mods"],[[null,w],[s,w]]);break;case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[s,[]]]);break;case"vips_success":t.endsWith(".")&&(t=t.slice(0,-1));var y=t.split(": ")[1].toLowerCase().split(", ").filter(e=>e);this.emits(["_promiseVips","vips"],[[null,y],[s,y]]);break;case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[s,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(v),this.emits(["notice","_promiseBan"],b);break;case"ban_success":this.log.info(v),this.emits(["notice","_promiseBan"],_);break;case"usage_clear":this.log.info(v),this.emits(["notice","_promiseClear"],b);break;case"usage_mods":this.log.info(v),this.emits(["notice","_promiseMods"],[f,[i,[]]]);break;case"mod_success":this.log.info(v),this.emits(["notice","_promiseMod"],_);break;case"usage_vips":this.log.info(v),this.emits(["notice","_promiseVips"],[f,[i,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":this.log.info(v),this.emits(["notice","_promiseVip"],[f,[i,[]]]);break;case"vip_success":this.log.info(v),this.emits(["notice","_promiseVip"],_);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(v),this.emits(["notice","_promiseMod"],b);break;case"unmod_success":this.log.info(v),this.emits(["notice","_promiseUnmod"],_);break;case"unvip_success":this.log.info(v),this.emits(["notice","_promiseUnvip"],_);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(v),this.emits(["notice","_promiseUnmod"],b);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(v),this.emits(["notice","_promiseUnvip"],b);break;case"color_changed":this.log.info(v),this.emits(["notice","_promiseColor"],_);break;case"usage_color":case"turbo_only_color":this.log.info(v),this.emits(["notice","_promiseColor"],b);break;case"commercial_success":this.log.info(v),this.emits(["notice","_promiseCommercial"],_);break;case"usage_commercial":case"bad_commercial_error":this.log.info(v),this.emits(["notice","_promiseCommercial"],b);break;case"hosts_remaining":this.log.info(v);var C=isNaN(t[0])?0:parseInt(t[0]);this.emits(["notice","_promiseHost"],[f,[null,~~C]]);break;case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(v),this.emits(["notice","_promiseHost"],[f,[i,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(v),this.emits(["notice","_promiseR9kbeta"],b);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(v),this.emits(["notice","_promiseR9kbetaoff"],b);break;case"timeout_success":this.log.info(v),this.emits(["notice","_promiseTimeout"],_);break;case"delete_message_success":this.log.info(`[${s} ${t}]`),this.emits(["notice","_promiseDeletemessage"],_);case"already_subs_off":case"usage_subs_off":this.log.info(v),this.emits(["notice","_promiseSubscribersoff"],b);break;case"already_subs_on":case"usage_subs_on":this.log.info(v),this.emits(["notice","_promiseSubscribers"],b);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(v),this.emits(["notice","_promiseEmoteonlyoff"],b);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(v),this.emits(["notice","_promiseEmoteonly"],b);break;case"usage_slow_on":this.log.info(v),this.emits(["notice","_promiseSlow"],b);break;case"usage_slow_off":this.log.info(v),this.emits(["notice","_promiseSlowoff"],b);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(v),this.emits(["notice","_promiseTimeout"],b);break;case"untimeout_success":case"unban_success":this.log.info(v),this.emits(["notice","_promiseUnban"],_);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(v),this.emits(["notice","_promiseUnban"],b);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(v),this.emits(["notice","_promiseDeletemessage"],b);break;case"usage_unhost":case"not_hosting":this.log.info(v),this.emits(["notice","_promiseUnhost"],b);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted_recipient":this.log.info(v),this.emits(["notice","_promiseWhisper"],b);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":this.log.info(v),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff"],b);break;case"unrecognized_cmd":this.log.info(v),this.emit("notice",s,i,t),"/w"===t.split(" ").splice(-1)[0]&&this.log.warn("You must be connected to a group server to send or receive whispers.");break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_rejected":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":this.log.info(v),this.emit("notice",s,i,t);break;case"host_on":case"host_off":break;default:t.includes("Login unsuccessful")||t.includes("Login authentication failed")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=t,this.log.error(this.reason),this.ws.close()):t.includes("Error logging in")||t.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=t,this.log.error(this.reason),this.ws.close()):t.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:\n${JSON.stringify(e,null,4)}`)}break;case"USERNOTICE":var k=e.tags["display-name"]||e.tags.login,$=e.tags["msg-param-sub-plan"]||"",x=m.unescapeIRC(m.get(e.tags["msg-param-sub-plan-name"],""))||null,T=$.includes("Prime"),E=e.tags,S=~~(e.tags["msg-param-streak-months"]||0),N=e.tags["msg-param-recipient-display-name"]||e.tags["msg-param-recipient-user-name"],P=~~e.tags["msg-param-mass-gift-count"],L={prime:T,plan:$,planName:x};switch(E["message-type"]=i,i){case"resub":this.emits(["resub","subanniversary"],[[s,k,S,t,E,L]]);break;case"sub":this.emit("subscription",s,k,L,t,E);break;case"subgift":this.emit("subgift",s,k,S,N,L,E);break;case"anonsubgift":this.emit("anonsubgift",s,S,N,L,E);break;case"submysterygift":this.emit("submysterygift",s,k,P,L,E);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",s,P,L,E);break;case"giftpaidupgrade":var O=e.tags["msg-param-sender-name"]||e.tags["msg-param-sender-login"];this.emit("giftpaidupgrade",s,k,O,E);break;case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",s,k,E);break;case"raid":k=e.tags["msg-param-displayName"]||e.tags["msg-param-login"];var D=e.tags["msg-param-viewerCount"];this.emit("raided",s,k,D)}break;case"HOSTTARGET":var I=t.split(" ");D=~~I[1]||0;"-"===I[0]?(this.log.info(`[${s}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[s,D],[null]])):(this.log.info(`[${s}] Now hosting ${I[0]} for ${D} viewer(s).`),this.emit("hosting",s,I[0],D));break;case"CLEARCHAT":if(e.params.length>1){var R=m.get(e.tags["ban-duration"],null);m.isNull(R)?(this.log.info(`[${s}] ${t} has been banned.`),this.emit("ban",s,t,null,e.tags)):(this.log.info(`[${s}] ${t} has been timed out for ${R} seconds.`),this.emit("timeout",s,t,null,~~R,e.tags))}else this.log.info(`[${s}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[s],[null]]);break;case"CLEARMSG":if(e.params.length>1){k=e.tags.login;var M=t;(E=e.tags)["message-type"]="messagedeleted",this.log.info(`[${s}] ${k}'s message has been deleted.`),this.emit("messagedeleted",s,k,M,E)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect(),setTimeout(()=>{this.connect()},this.reconnectTimer);break;case"SERVERCHANGE":break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[this.lastJoined]||(this.moderators[this.lastJoined]=[]),this.moderators[this.lastJoined].includes(this.username)||this.moderators[this.lastJoined].push(this.username)),m.isJustinfan(this.getUsername())||this.userstate[s]||(this.userstate[s]=e.tags,this.lastJoined=s,this.channels.push(s),this.log.info(`Joined ${s}`),this.emit("join",s,m.username(this.getUsername()),!0)),e.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(e.tags["emote-sets"]),this.userstate[s]=e.tags;break;case"GLOBALUSERSTATE":this.globaluserstate=e.tags,void 0!==e.tags["emote-sets"]&&this._updateEmoteset(e.tags["emote-sets"]);break;case"ROOMSTATE":if(m.channel(this.lastJoined)===m.channel(e.params[0])&&this.emit("_promiseJoin",null),e.tags.channel=m.channel(e.params[0]),this.emit("roomstate",m.channel(e.params[0]),e.tags),!e.tags.hasOwnProperty("subs-only")){if(e.tags.hasOwnProperty("slow"))if("boolean"!=typeof e.tags.slow||e.tags.slow){var A=~~e.tags.slow;this.log.info(`[${s}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[[s,!0,A],[s,!0,A],[null]])}else this.log.info(`[${s}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[[s,!1,0],[s,!1,0],[null]]);if(e.tags.hasOwnProperty("followers-only"))if("-1"===e.tags["followers-only"])this.log.info(`[${s}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[[s,!1,0],[s,!1,0],[null]]);else{A=~~e.tags["followers-only"];this.log.info(`[${s}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[[s,!0,A],[s,!0,A],[null]])}}break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:\n${JSON.stringify(e,null,4)}`)}else if("jtv"===e.prefix)switch(e.command){case"MODE":"+o"===t?(this.moderators[s]||(this.moderators[s]=[]),this.moderators[s].includes(e.params[2])||this.moderators[s].push(e.params[2]),this.emit("mod",s,e.params[2])):"-o"===t&&(this.moderators[s]||(this.moderators[s]=[]),this.moderators[s].filter(s=>s!=e.params[2]),this.emit("unmod",s,e.params[2]));break;default:this.log.warn(`Could not parse message from jtv:\n${JSON.stringify(e,null,4)}`)}else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":var U=e.prefix.split("!")[0];m.isJustinfan(this.getUsername())&&this.username===U&&(this.lastJoined=s,this.channels.push(s),this.log.info(`Joined ${s}`),this.emit("join",s,U,!0)),this.username!==U&&this.emit("join",s,U,!1);break;case"PART":var J,j=!1;U=e.prefix.split("!")[0];if(this.username===U)j=!0,this.userstate[s]&&delete this.userstate[s],-1!==(J=this.channels.indexOf(s))&&this.channels.splice(J,1),-1!==(J=this.opts.channels.indexOf(s))&&this.opts.channels.splice(J,1),this.log.info(`Left ${s}`),this.emit("_promisePart",null);this.emit("part",s,U,j);break;case"WHISPER":U=e.prefix.split("!")[0];this.log.info(`[WHISPER] <${U}>: ${t}`),e.tags.hasOwnProperty("username")||(e.tags.username=U),e.tags["message-type"]="whisper";var H=m.channel(e.tags.username);this.emits(["whisper","message"],[[H,e.tags,t,!1]]);break;case"PRIVMSG":if(e.tags.username=e.prefix.split("!")[0],"jtv"===e.tags.username){var G=m.username(t.split(" ")[0]),W=t.includes("auto");if(t.includes("hosting you for")){var V=m.extractNumber(t);this.emit("hosted",s,G,V,W)}else t.includes("hosting you")&&this.emit("hosted",s,G,0,W)}else{var q=m.actionMessage(t);q?(e.tags["message-type"]="action",this.log.info(`[${s}] *<${e.tags.username}>: ${q[1]}`),this.emits(["action","message"],[[s,e.tags,q[1],!1]])):e.tags.hasOwnProperty("bits")?this.emit("cheer",s,e.tags,t):(e.tags["message-type"]="chat",this.log.info(`[${s}] <${e.tags.username}>: ${t}`),this.emits(["chat","message"],[[s,e.tags,t,!1]]))}break;default:this.log.warn(`Could not parse message:\n${JSON.stringify(e,null,4)}`)}}},u.prototype.connect=function(){return new Promise((e,s)=>{this.server=m.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=m.get(this.opts.connection.port,80),this.secure&&(this.port=443),443===this.port&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",t=>{t?s(t):e([this.server,~~this.port])})})},u.prototype._openConnection=function(){this.ws=new l(`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,"irc"),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},u.prototype._onOpen=function(){m.isNull(this.ws)||1!==this.ws.readyState||(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=m.get(this.opts.identity.username,m.justinfan()),this.password=m.password(m.get(this.opts.identity.password,"SCHMOOPIIE")),this.log.info("Sending authentication to server.."),this.emit("logon"),this.ws.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership"),this.ws.send(`PASS ${this.password}`),this.ws.send(`NICK ${this.username}`),this.ws.send(`USER ${this.username} 8 * :${this.username}`))},u.prototype._onMessage=function(e){e.data.split("\r\n").forEach(e=>{m.isNull(e)||this.handleMessage(a.msg(e))})},u.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),this.reason=m.isNull(this.ws)?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect()},this.reconnectTimer)),this.ws=null},u.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect()},this.reconnectTimer))),this.ws=null},u.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},u.prototype._sendCommand=function(e,s,t,i){return new Promise((n,o)=>{if(m.promiseDelay(e).then(()=>{o("No response from Twitch.")}),m.isNull(this.ws)||2===this.ws.readyState||3===this.ws.readyState)o("Not connected to server.");else{if(m.isNull(s))this.log.info(`Executing command: ${t}`),this.ws.send(t);else{var r=m.channel(s);this.log.info(`[${r}] Executing command: ${t}`),this.ws.send(`PRIVMSG ${r} :${t}`)}i(n,o)}})},u.prototype._sendMessage=function(e,s,t,i){return new Promise((n,o)=>{if(m.isNull(this.ws)||2===this.ws.readyState||3===this.ws.readyState||m.isJustinfan(this.getUsername()))o("Not connected to server.");else{var r=m.channel(s);if(this.userstate[r]||(this.userstate[r]={}),t.length>=500){var h=m.splitLine(t,500);t=h[0],setTimeout(()=>{this._sendMessage(e,s,h[1],()=>{})},350)}this.ws.send(`PRIVMSG ${r} :${t}`);var c={};Object.keys(this.emotesets).forEach(e=>{this.emotesets[e].forEach(function(e){if(m.isRegex(e.code))return a.emoteRegex(t,e.code,e.id,c);a.emoteString(t,e.code,e.id,c)})});var l=m.merge(this.userstate[r],a.emotes({emotes:a.transformEmotes(c)||null})),u=m.actionMessage(t);u?(l["message-type"]="action",this.log.info(`[${r}] *<${this.getUsername()}>: ${u[1]}`),this.emits(["action","message"],[[r,l,u[1],!0]])):(l["message-type"]="chat",this.log.info(`[${r}] <${this.getUsername()}>: ${t}`),this.emits(["chat","message"],[[r,l,t,!0]])),i(n,o)}})},u.prototype._updateEmoteset=function(e){this.emotes=e,this.api({url:`/chat/emoticon_images?emotesets=${e}`,headers:{Authorization:`OAuth ${m.password(m.get(this.opts.identity.password,"")).replace("oauth:","")}`,"Client-ID":this.clientId}},(s,t,i)=>{if(!s)return this.emotesets=i.emoticon_sets||{},this.emit("emotesets",e,this.emotesets);setTimeout(()=>{this._updateEmoteset(e)},6e4)})},u.prototype.getUsername=function(){return this.username},u.prototype.getOptions=function(){return this.opts},u.prototype.getChannels=function(){return this.channels},u.prototype.isMod=function(e,s){var t=m.channel(e);return this.moderators[t]||(this.moderators[t]=[]),this.moderators[t].includes(m.username(s))},u.prototype.readyState=function(){return m.isNull(this.ws)?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},u.prototype.disconnect=function(){return new Promise((e,s)=>{m.isNull(this.ws)||3===this.ws.readyState?(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),s("Cannot disconnect from server. Socket is not opened or connection is already closing.")):(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",()=>{e([this.server,~~this.port])}))})},u.prototype.utils=c,e.exports&&(e.exports=u),"undefined"!=typeof window&&(window.tmi={},window.tmi.client=u,window.tmi.Client=u)}).call(this,t(27))},201:function(e,s,t){var i=t(151),n=t(142);e.exports=function(e,s){var t=null===n.get(e.url,null)?n.get(e.uri,null):n.get(e.url,null);if(n.isURL(t)||(t="https://api.twitch.tv/kraken"+("/"===t[0]?t:`/${t}`)),n.isNode())i(n.merge({method:"GET",json:!0},e,{url:t}),s);else if(n.isExtension()){e=n.merge({url:t,method:"GET",headers:{}},e);var o=new XMLHttpRequest;for(var r in o.open(e.method,e.url,!0),e.headers)o.setRequestHeader(r,e.headers[r]);o.responseType="json",o.addEventListener("load",e=>{4==o.readyState&&(200!=o.status?s(o.status,null,null):s(null,null,o.response))}),o.send()}else{var a=`jsonp_callback_${Math.round(1e5*Math.random())}`;window[a]=function(e){delete window[a],document.body.removeChild(h),s(null,null,e)};var h=document.createElement("script");h.src=`${t}${t.includes("?")?"&":"?"}callback=${a}`,document.body.appendChild(h)}}},202:function(e,s,t){var i=t(142);function n(e,s){return e=i.channel(e),s=i.get(s,30),this._sendCommand(this._getPromiseDelay(),e,`/followers ${s}`,(t,i)=>{this.once("_promiseFollowers",n=>{n?i(n):t([e,~~s])})})}function o(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/followersoff",(s,t)=>{this.once("_promiseFollowersoff",i=>{i?t(i):s([e])})})}function r(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),null,`PART ${e}`,(s,t)=>{this.once("_promisePart",i=>{i?t(i):s([e])})})}function a(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbeta",(s,t)=>{this.once("_promiseR9kbeta",i=>{i?t(i):s([e])})})}function h(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbetaoff",(s,t)=>{this.once("_promiseR9kbetaoff",i=>{i?t(i):s([e])})})}function c(e,s){return e=i.channel(e),s=i.get(s,300),this._sendCommand(this._getPromiseDelay(),e,`/slow ${s}`,(t,i)=>{this.once("_promiseSlow",n=>{n?i(n):t([e,~~s])})})}function l(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/slowoff",(s,t)=>{this.once("_promiseSlowoff",i=>{i?t(i):s([e])})})}e.exports={action:function(e,s){return e=i.channel(e),s=`ACTION ${s}`,this._sendMessage(this._getPromiseDelay(),e,s,(t,i)=>{t([e,s])})},ban:function(e,s,t){return e=i.channel(e),s=i.username(s),t=i.get(t,""),this._sendCommand(this._getPromiseDelay(),e,`/ban ${s} ${t}`,(i,n)=>{this.once("_promiseBan",o=>{o?n(o):i([e,s,t])})})},clear:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/clear",(s,t)=>{this.once("_promiseClear",i=>{i?t(i):s([e])})})},color:function(e,s){return s=i.get(s,e),this._sendCommand(this._getPromiseDelay(),"#tmijs",`/color ${s}`,(e,t)=>{this.once("_promiseColor",i=>{i?t(i):e([s])})})},commercial:function(e,s){return e=i.channel(e),s=i.get(s,30),this._sendCommand(this._getPromiseDelay(),e,`/commercial ${s}`,(t,i)=>{this.once("_promiseCommercial",n=>{n?i(n):t([e,~~s])})})},deletemessage:function(e,s){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,`/delete ${s}`,(s,t)=>{this.once("_promiseDeletemessage",i=>{i?t(i):s([e])})})},emoteonly:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/emoteonly",(s,t)=>{this.once("_promiseEmoteonly",i=>{i?t(i):s([e])})})},emoteonlyoff:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/emoteonlyoff",(s,t)=>{this.once("_promiseEmoteonlyoff",i=>{i?t(i):s([e])})})},followersonly:n,followersmode:n,followersonlyoff:o,followersmodeoff:o,host:function(e,s){return e=i.channel(e),s=i.username(s),this._sendCommand(2e3,e,`/host ${s}`,(t,i)=>{this.once("_promiseHost",(n,o)=>{n?i(n):t([e,s,~~o])})})},join:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),null,`JOIN ${e}`,(s,t)=>{this.once("_promiseJoin",i=>{i?t(i):s([e])})})},mod:function(e,s){return e=i.channel(e),s=i.username(s),this._sendCommand(this._getPromiseDelay(),e,`/mod ${s}`,(t,i)=>{this.once("_promiseMod",n=>{n?i(n):t([e,s])})})},mods:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/mods",(s,t)=>{this.once("_promiseMods",(i,n)=>{i?t(i):(n.forEach(s=>{this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(s)||this.moderators[e].push(s)}),s(n))})})},part:r,leave:r,ping:function(){return this._sendCommand(this._getPromiseDelay(),null,"PING",(e,s)=>{this.latency=new Date,this.pingTimeout=setTimeout(()=>{null!==this.ws&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},i.get(this.opts.connection.timeout,9999)),this.once("_promisePing",s=>{e([parseFloat(s)])})})},r9kbeta:a,r9kmode:a,r9kbetaoff:h,r9kmodeoff:h,raw:function(e){return this._sendCommand(this._getPromiseDelay(),null,e,(s,t)=>{s([e])})},say:function(e,s){return e=i.channel(e),s.startsWith(".")&&!s.startsWith("..")||s.startsWith("/")||s.startsWith("\\")?"me "===s.substr(1,3)?this.action(e,s.substr(4)):this._sendCommand(this._getPromiseDelay(),e,s,(t,i)=>{t([e,s])}):this._sendMessage(this._getPromiseDelay(),e,s,(t,i)=>{t([e,s])})},slow:c,slowmode:c,slowoff:l,slowmodeoff:l,subscribers:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/subscribers",(s,t)=>{this.once("_promiseSubscribers",i=>{i?t(i):s([e])})})},subscribersoff:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/subscribersoff",(s,t)=>{this.once("_promiseSubscribersoff",i=>{i?t(i):s([e])})})},timeout:function(e,s,t,n){return e=i.channel(e),s=i.username(s),i.isNull(t)||i.isInteger(t)||(n=t,t=300),t=i.get(t,300),n=i.get(n,""),this._sendCommand(this._getPromiseDelay(),e,`/timeout ${s} ${t} ${n}`,(i,o)=>{this.once("_promiseTimeout",r=>{r?o(r):i([e,s,~~t,n])})})},unban:function(e,s){return e=i.channel(e),s=i.username(s),this._sendCommand(this._getPromiseDelay(),e,`/unban ${s}`,(t,i)=>{this.once("_promiseUnban",n=>{n?i(n):t([e,s])})})},unhost:function(e){return e=i.channel(e),this._sendCommand(2e3,e,"/unhost",(s,t)=>{this.once("_promiseUnhost",i=>{i?t(i):s([e])})})},unmod:function(e,s){return e=i.channel(e),s=i.username(s),this._sendCommand(this._getPromiseDelay(),e,`/unmod ${s}`,(t,i)=>{this.once("_promiseUnmod",n=>{n?i(n):t([e,s])})})},unvip:function(e,s){return e=i.channel(e),s=i.username(s),this._sendCommand(this._getPromiseDelay(),e,`/unvip ${s}`,(t,i)=>{this.once("_promiseUnvip",n=>{n?i(n):t([e,s])})})},vip:function(e,s){return e=i.channel(e),s=i.username(s),this._sendCommand(this._getPromiseDelay(),e,`/vip ${s}`,(t,i)=>{this.once("_promiseVip",n=>{n?i(n):t([e,s])})})},vips:function(e){return e=i.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/vips",(e,s)=>{this.once("_promiseVips",(t,i)=>{t?s(t):e(i)})})},whisper:function(e,s){return(e=i.username(e))===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(this._getPromiseDelay(),"#tmijs",`/w ${e} ${s}`,(t,n)=>{var o=i.channel(e),r=i.merge({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);this.emits(["whisper","message"],[[o,r,s,!0],[o,r,s,!0]]),t([e,s])})}}},203:function(e,s){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}String.prototype.startsWith||(String.prototype.startsWith=function(e,s){return s=s||0,this.indexOf(e,s)===s}),e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emits=function(e,s){for(var t=0;t<e.length;t++){var i=t<s.length?s[t]:s[s.length-1];this.emit.apply(this,[e[t]].concat(i))}},t.prototype.emit=function(e){var s,t,r,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((s=arguments[1])instanceof Error)throw s;throw TypeError('Uncaught, unspecified "error" event.')}if(o(t=this._events[e]))return!1;if(i(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),t.apply(this,a)}else if(n(t))for(a=Array.prototype.slice.call(arguments,1),r=(c=t.slice()).length,h=0;h<r;h++)c[h].apply(this,a);return!0},t.prototype.addListener=function(e,s){var r;if(!i(s))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(s.listener)?s.listener:s),this._events[e]?n(this._events[e])?this._events[e].push(s):this._events[e]=[this._events[e],s]:this._events[e]=s,n(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,s){if(!i(s))throw TypeError("listener must be a function");var t=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var n=1,o=e;for(var r in this._events)this._events.hasOwnProperty(r)&&r.startsWith(o)&&n++;e+=n}function a(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,a),t||(t=!0,s.apply(this,arguments))}return a.listener=s,this.on(e,a),this},t.prototype.removeListener=function(e,s){var t,o,r,a;if(!i(s))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(t=this._events[e]).length,o=-1,t===s||i(t.listener)&&t.listener===s){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var h=e;for(var c in this._events)this._events.hasOwnProperty(c)&&c.startsWith(h)&&(isNaN(parseInt(c.substr(c.length-1)))||(this._events[e+parseInt(c.substr(c.length-1)-1)]=this._events[c],delete this._events[c]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,s)}else if(n(t)){for(a=r;a-- >0;)if(t[a]===s||t[a].listener&&t[a].listener===s){o=a;break}if(o<0)return this;1===t.length?(t.length=0,delete this._events[e]):t.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,s)}return this},t.prototype.removeAllListeners=function(e){var s,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(s in this._events)"removeListener"!==s&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events={},this}if(i(t=this._events[e]))this.removeListener(e,t);else if(t)for(;t.length;)this.removeListener(e,t[t.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var s=this._events[e];if(i(s))return 1;if(s)return s.length}return 0},t.listenerCount=function(e,s){return e.listenerCount(s)}},204:function(e,s,t){var i=t(142),n="info",o={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function r(e){return function(s){o[e]>=o[n]&&console.log(`[${i.formatDate(new Date)}] ${e}: ${s}`)}}e.exports={setLevel:function(e){n=e},trace:r("trace"),debug:r("debug"),info:r("info"),warn:r("warn"),error:r("error"),fatal:r("fatal")}},205:function(e,s,t){var i=t(142);e.exports={badges:function(e){if(i.isString(e.badges)){for(var s={},t=e.badges.split(","),n=0;n<t.length;n++){var o=t[n].split("/");if(!o[1])return;s[o[0]]=o[1]}e["badges-raw"]=e.badges,e.badges=s}return i.isBoolean(e.badges)&&(e["badges-raw"]=null),e},emotes:function(e){if(i.isString(e.emotes)){for(var s=e.emotes.split("/"),t={},n=0;n<s.length;n++){var o=s[n].split(":");if(!o[1])return;t[o[0]]=o[1].split(",")}e["emotes-raw"]=e.emotes,e.emotes=t}return i.isBoolean(e.emotes)&&(e["emotes-raw"]=null),e},emoteRegex:function(e,s,t,n){for(var o,r=/\S+/g,a=new RegExp("(\\b|^|s)"+i.unescapeHtml(s)+"(\\b|$|s)");null!==(o=r.exec(e));)a.test(o[0])&&(n[t]=n[t]||[],n[t].push([o.index,r.lastIndex-1]))},emoteString:function(e,s,t,n){for(var o,r=/\S+/g;null!==(o=r.exec(e));)o[0]===i.unescapeHtml(s)&&(n[t]=n[t]||[],n[t].push([o.index,r.lastIndex-1]))},transformEmotes:function(e){var s="";return Object.keys(e).forEach(t=>{s=`${s+t}:`,e[t].forEach(e=>{s=`${s+e.join("-")},`}),s=`${s.slice(0,-1)}/`}),s.slice(0,-1)},msg:function(e){var s={raw:e,tags:{},prefix:null,command:null,params:[]},t=0,i=0;if(64===e.charCodeAt(0)){if(-1===(i=e.indexOf(" ")))return null;for(var n=e.slice(1,i).split(";"),o=0;o<n.length;o++){var r=n[o],a=r.split("=");s.tags[a[0]]=r.substring(r.indexOf("=")+1)||!0}t=i+1}for(;32===e.charCodeAt(t);)t++;if(58===e.charCodeAt(t)){if(-1===(i=e.indexOf(" ",t)))return null;for(s.prefix=e.slice(t+1,i),t=i+1;32===e.charCodeAt(t);)t++}if(-1===(i=e.indexOf(" ",t)))return e.length>t?(s.command=e.slice(t),s):null;for(s.command=e.slice(t,i),t=i+1;32===e.charCodeAt(t);)t++;for(;t<e.length;){if(i=e.indexOf(" ",t),58===e.charCodeAt(t)){s.params.push(e.slice(t+1));break}if(-1===i){if(-1===i){s.params.push(e.slice(t));break}}else for(s.params.push(e.slice(t,i)),t=i+1;32===e.charCodeAt(t);)t++}return s}}},206:function(e,s){function t(e){this.queue=[],this.index=0,this.defaultDelay=e||3e3}t.prototype.add=function(e,s){this.queue.push({fn:e,delay:s})},t.prototype.run=function(e){(e||0===e)&&(this.index=e),this.next()},t.prototype.next=function(){var e=this.index++,s=this.queue[e],t=this.queue[this.index];s&&(s.fn(),t&&setTimeout(()=>{this.next()},t.delay||this.defaultDelay))},t.prototype.reset=function(){this.index=0},t.prototype.clear=function(){this.index=0,this.queue=[]},s.queue=t},207:function(e,s,t){var i=t(142);e.exports={levenshtein:function(e,s,t){if((t=i.get(t,!1))||(e=e.toLowerCase(),s=s.toLowerCase()),e==s)return 0;var n=e.length,o=s.length;if(0===n)return 1*o;if(0===o)return 1*n;var r=!1;try{r=!"0"[0]}catch(e){r=!0}r&&(e=e.split(""),s=s.split(""));var a,h,c,l,m,u,p=new Array(o+1),f=new Array(o+1);for(h=0;h<=o;h++)p[h]=1*h;for(a=0;a<n;a++){for(f[0]=p[0]+1,h=0;h<o;h++)c=p[h]+(e[a]==s[h]?0:1),(l=p[h+1]+1)<c&&(c=l),(m=f[h]+1)<c&&(c=m),f[h+1]=c;u=p,p=f,f=u}return c=p[o]},raffle:{init:function(e){this.raffleChannels||(this.raffleChannels={}),this.raffleChannels[i.channel(e)]||(this.raffleChannels[i.channel(e)]=[])},enter:function(e,s){this.init(e),this.raffleChannels[i.channel(e)].push(s.toLowerCase())},leave:function(e,s){this.init(e);var t=this.raffleChannels[i.channel(e)].indexOf(i.username(s));return t>=0&&(this.raffleChannels[i.channel(e)].splice(t,1),!0)},pick:function(e){this.init(e);var s=this.raffleChannels[i.channel(e)].length;return s>=1?this.raffleChannels[i.channel(e)][Math.floor(Math.random()*s)]:null},reset:function(e){this.init(e),this.raffleChannels[i.channel(e)]=[]},count:function(e){return this.init(e),this.raffleChannels[i.channel(e)]?this.raffleChannels[i.channel(e)].length:0},isParticipating:function(e,s){return this.init(e),this.raffleChannels[i.channel(e)].includes(i.username(s))}},symbols:function(e){for(var s=0,t=0;t<e.length;t++){var i=e.substring(t,t+1).charCodeAt(0);(i<=30||i>=127||65533===i)&&s++}return Math.ceil(s/e.length*100)/100},uppercase:function(e){var s=e.length,t=e.match(/[A-Z]/g);return i.isNull(t)?0:t.length/s}}}}]);